<app-menu></app-menu>
    <div class="container border bg-white shadow mt-3 mb-5 p-4">
        <div class="text-center"><h2>Mi carrito</h2></div>
        <div class="text-info"><h4><span style="cursor: pointer;" (click)="mandarCuenta()">{{user}}</span></h4></div>
        <div class="row">
            
            <div class="col">
                <table class="table table-hover table-dark table-sm table-striped">
                    <thead>
                        <tr>
                            <th>Folio</th>
                            <th></th>
                            <th>Producto</th>
                            <th></th>
                            <th>Precio x Pieza</th>
                            <th>Piezas</th>
                            <th>Subtotal</th>
                            <th></th>
                            
                        </tr>
                    </thead>
                    <tbody>
                        <tr  *ngFor="let carrito of carritos; let i=index">
                            <td><b>{{i+1}}</b></td>
                            <td></td>
                            <td>{{carrito.nombre_prod}}</td>
                            <td></td>
                            <td>$ {{carrito.precio_car}}</td>
                            <td data-toggle='modal' data-target='#modificarPiezas' (click)="temporalCarrito(carrito)">{{carrito.piezas_car}}</td>
                            <td >$ {{subtotal(i)}}</td>
                            <td class="table-sm">
                                <button class="btn btn-primary btn-sm mb-3"  data-toggle='modal' data-target='#modificarPiezas' (click)="temporalCarrito(carrito)"><i class="fas fa-pen"></i></button>
                            &nbsp;
                                <button class="btn btn-danger btn-sm" data-toggle='modal' data-target='#quitarProducto' (click)="temporalCarrito(carrito)"><i class="fas fa-trash"></i></button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div><br><br><br><br><br>
    </div>
<div class="modal fade" id="modificarPiezas" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title text-center" id="exampleModalLongTitle">Modificar piezas</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <div class="input-group-text">Piezas:</div>
                    </div>
                    <input type="number" min="1" max="5" class="form-control" id="piezasProd" value="1"placeholder="Piezas"
                        [(ngModel)]="tmpCarrito.piezas_car">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="modificarCarrito()"
                    >Guardar cambio</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="quitarProducto" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title text-center" id="exampleModalLongTitle">Quitar de carrito</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Â¿Esta seguro que quiere quitar el producto de tu carrito?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal"(click)="quitarCarrito()">Quitar</button>
            </div>
        </div>
    </div>
</div>